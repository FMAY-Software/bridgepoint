= Introduce ASL Editor

xtUML Project Design Note


== 1 Abstract

This note describes the work to add an ASL editor along with the existing
OAL and MASL editors.

TIP:  This document is marked down with http://asciidoc.org/[AsciiDoc].
You can get tips from the
https://asciidoctor.org/docs/asciidoc-syntax-quick-reference/[AsciiDoc Quick Reference].

== 2 Introduction and Background

Here is an example reference to a document reference <<dr-3>>.
Here is an example with named text <<dr-3,SMASL Specification>>.
Here we refer to the image below, <<caption text under image>>.

.caption text under image
image::localimage.png[image description alternate text,width=25%]

== 3 Requirements

TODO 

== 4 Analysis

ASL editor
------------
NOTE: ASL at models/wasl/data. https://github.com/cortlandstarrett/models/blob/11444_wasl/wasl/data/Events/TSV2_10_9/meta_instances/Events_20/extracted_data/Events_objVERCETL_2.al

x Add to the ActionDialect enum in the metamodel
  x (Cort) Make the same change in MC metamodel

- New editor / editor input / etc
  - See org.xtuml.bp.ui.text.activity.ActivityEditorInput / ActivityEditor
    and org.xtuml.bp.ui.text.masl.MASLEditorInput
  - ASLActivityEditorInputFactor.java should be generated
  - Look at what else is editor-related and generated... 

- Find places where dialect*==*masl
  - there are places in oal that I have not investigated yet
  - Attribute::migrateBaseToDerived()
  x [Bridge|Function|Operation...]::Initialize() - only for begin/end, so may not be needed for ASL
  - create_explorer_view.inc (Generates ExplorerView.java)
    - Note that there are places where the code checks == and != Actiondialect_c.[oal|masl]   Look at both!
  - GraphicalEditor.java : handleOpen() here is very similar to the one in ExplorerView but this one is not generated
  - SampleProjectGettingStartedAction.java - handling for special MASL prefs (identifier naming and concrete polys)
  - In the context menu Open list, "ASL Editor", "MASL Editor", "Activity Editor"... change to "OAL Editor"?

- ExplorerView::handleOpen()
  // Looks for all extensions to org.xtuml.bp.core.editors
  // Figures out which editor to open
  x Modify to handle opening ASL editor when it sees ASL dialect

- Verify maven clean target works properly in ui.text plugin for new java files

- TODO: Look over all new code and see if there are unused functions, import cleanup, TODOs etc...

- TODO: preferences
  - add ASL to default action language selection on prefs ui
  - Handle in ActionLanguagePreferences.java

- TODO - why does ui.text/arc/create_plugin_xml.arc (line 188) explictly list MASL object contributions rather than use the loop
  and set that OAL does on line 162???
  - I set up ASL like MASL but not sure that's right...
  - Need type definition editor like MASL does in this function (line 478)???

auto-indent
  - Old issue is 10232 OAL Editor Enhancements.
  - if ... then
    else
    endif
  - for ... in ... do
    endfor
  - no while loop???
  
syntax highlight
  - keywords: create/with, generate/to, if/else/endif, define/enddefine, delete, countof, TRUE/FALSE/UNDEFINED, this,
              find/find-one/find-all/where, link, for/in/do/endfor, break, $INLINE/$ENDINLINE, $ADA_INLINE/$END_ADAINLINE,
              no elseif???
      - OAL version is generated            
      - find-one and find-all choke on dash in name
  - comments with #, no multi-line
  - Strings only delimited with "" and not ' '  

junit tests

== 5 Design

TODO

=== 5.1 Item

TODO


== 6 Design Comments

TODO

== 7 User Documentation

TODO

== 8 Unit Test

TODO

== 9 Document References

. [[dr-1]] https://support.onefact.net/issues/NNNNN[NNNNN - headline]
. [[dr-2]] ...
. [[dr-3]] link:../8073_masl_parser/8277_serial_masl_spec.md[Serial MASL (SMASL) Specification]

---

This work is licensed under the Creative Commons CC0 License

---
