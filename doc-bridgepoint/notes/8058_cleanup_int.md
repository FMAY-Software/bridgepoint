---

This work is licensed under the Creative Commons CC0 License

---

# Remove un-needed if(!isInGenericPackage) block
### xtUML Project Implementation Note

### 1. Abstract

This note describes work performed to clean up various issues with the BridgePoint source code.  The
majority of the work here is non-functional cleanup.

### 2. Document References

<a id="2.1"></a>2.1 [BridgePoint DEI #8058](https://support.onefact.net/issues/8058) Headline issue.    
<a id="2.2"></a>2.2 [BridgePoint DEI #8969](https://support.onefact.net/issues/8969) Clean up build.properties files    
<a id="2.3"></a>2.3 [BridgePoint DEI #7769](https://support.onefact.net/issues/7769) Remove specialized packages    

### 3. Background

Specialized packages have been removed from BridgePoint for a long time [2.3].  The BridgePoint source code still carries 
some checks for "isInGenericPackage" that are no longer meaningful.  This dead code and comments should be cleaned up.   

At the same time, there are other places where the code can be cleaned up to remove warnings by removing unused imports
and fixing problems in the plugin metadata files [2.2].  These places are non-functional changes that simply reduce the number
of warnings shown to the developer.      

### 4. Requirements

The over-arching goal of this work is to tidy up code and warnings while working quickly and not breaking
any current functionality.  

4.1  The uses of the `isInGenericPackage` code and comments shall be removed.   
4.2  Warning markers in plugin metadata shall be reduced.   

### 5. Work Required

5.1  `isInGenericPackage` flag  
5.1.1  Search the whole BridgePoint code base for the `isInGenericPackage` flag.  If the flag exists in
a comment, remove it.  If the flag exists in code, it will almost certainly be in a conditional code path
for generic or specialized packages.  Remove the specialized package side of the condition and then remove 
the conditional check.  

5.2 Remove code comment file headers that reference CVS revision control substitution tags.  

5.3  `src/MC-Java/java.arc`   
This file contained code marked with `TODO` comments that indicate obsolete functions.  Remove them.   

5.4  Update plugin `MANIFEST.MF` files   
5.4.1  Oxygen-based BridgePoint is now showing the warning "Automatic-Module-Name header needed for Java 9".  
5.4.2  Use the "Quick Fix" feature of eclipse to add the required MANIFEST rule.  They look like this: `Automatic-Module-Name: org.xtuml.bp.als.oal`.  This
rule has no adverse effects in plug-ins targeted for Java8, so go ahead and resolve this now to get rid of the warning and
have one less thing to fix when BridgePoint moves to Java9.   
5.4.3  In some cases, the `plugin.xml` file is no longer needed as all the required information has moved to `MANIFEST.MF`.  In
these cases the `plugin.xml` is removed.   
5.4.4  Some MANIFEST files specified the rule `Bundle-Localization: plugin`. This rule creates a warning when there is no
`plugin/` folder that contains localization info.  In these cases the warning is fixed by removing the rule.   

5.5  Update `build.properties`   
5.5.1  Several BridgePoint plugins have warning markers on their `build.properties` files that were due to wrong includes
for binary or source packaging.  Resolve these.   

5.6  Java source imports   
5.6.1  Many Java source files in the BridgePoint code base have unused imports.  These lead to warnings.  Use the `Organize imports` tool
to get rid of unused imports.   
5.6.2  The work to clean up these imports in this issue is restricted to hand-craft, committed code.  It does not address (the many)
cases of unused imports in generated Java source.  These are a lot harder to address since the code generator is very liberal in 
adding import blocks that are reused across many generated files.    

5.7  Unused variables   
5.7.1  Warnings are generated by the Java compiler for unused variables and functions.  These can be cleaned up carefully and judiciously, leaving
them in place if there is any question about their usefulness.   
5.7.2  There are a lot of places where a function returns a value, so Java wants you to assign the call to a local (it will generate
a warning if you don't).  However, the code may not want to do anything with the return value.  So, you get a warning saying the 
return value is never used.  These are mostly left in place.   

5.8  Fix null access   
5.8.1  In `src/org.xtuml.bp.als.oal/src/org/xtuml/bp/als/oal/TextParser.java` the code at line 202 was making a function call
on a variable that could only be null at this point.  Fix.   
 
5.9  Removed commented out code blocks   
5.9.1  Look for commented out code, especially those marked with TODOs and remove them.   
5.9.2  Remove old commented out functions in the JUnit test classes that explicitly created a test run order.   
 
5.10 Fix unclosed streams   
A few places in the code opened streams but never explicitly closed them.  These were marked with Java warnings.  Fix the
code to close the streams.   

5.11  Fix deprecated function calls   
5.11.1  The Eclipse API changes over time and function calls are deprecated.  The BridgePoint code often still works
against the deprecated calls, but over time they can break as we move from one version of eclipse to another.  Deprecated calls 
were fixed in this work when the change to make was easy and obvious.    
5.11.2  Calls to `Platform.resolveURL(...)` were replaced with `FileLocator.resolveURL(...)`   
5.11.3  BridgePoint code made direct access to the class variables like `PrecisionPoint.preciseX`.  This direct access is 
deprecated and thus replaced in BP code with calls like `PrecisionPoint.preciseX()`.   

 
### 6. Implementation Comments

None.  

### 7. Unit Test

7.1  The JUnit test suite on the server shall run with similar results to the current nightly build.   
7.2  Manual smoke test (#10034) on MacOS shall pass on the branch build from the server

### 8. User Documentation

None.   

### 9. Code Changes

Fork/Repository: __keithbrown/bridgepoint__   
Branch: __8058_cleanup__    

<pre>

 Put the file list here 

</pre>

Fork/Repository: __keithbrown/bptest__   
Branch: __8058_cleanup__    

<pre>

 Put the file list here 

</pre>
### End

